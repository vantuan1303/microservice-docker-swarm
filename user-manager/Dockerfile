FROM node:13

ARG MONGODB_USER_NAME
ARG MONGODB_PASSWORD
ARG MONGODB_SERVICE_NAME

ENV MONGODB_USER_NAME = ${MONGODB_USER_NAME}
ENV MONGODB_PASSWORD = ${MONGODB_PASSWORD}
ENV MONGODB_SERVICE_NAME = ${MONGODB_SERVICE_NAME}

WORKDIR /usr/src/app
COPY package.json ./
COPY package-lock.json ./
RUN npm ci --only=production 
COPY . .
EXPOSE 3001

CMD [ "npm", "start" ]   